{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>eTreasure Hunt - Map Search</title>
    <link rel="stylesheet" href="{% static "base.css" %}">
    <link rel="stylesheet" href="{% static "map-style.css" %}">
  </head>
  <body>
    <a href="#map" class="skip-link">Skip to map</a>
    <header class="top" style="--top-bg: url({% static "colors.png" %})">
      <div class="left">
        <a href="{% url 'go-home' %}">HOME</a>
      </div>
      <div class="left">
      {% if lvl %}
        <a href="{% url 'alt-map' %}?lvl={{ lvl }}">ALT MAP</a>
      {% else %}
        <a href="{% url 'alt-map' %}">ALT MAP</a>
      {% endif %}
      </div>
      <form class="logout-form" method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit">Log out</button>
      </form>
    </header>
    <input id="autocomplete" class="controls" type="text"
           placeholder="Search for a location"
           aria-label="Location search" />
    <button id="search-button"
            class="gobutton google-gobutton"
            aria-label="Search at current map location">SEARCH HERE</button>
    <section class="special">
      <div id="map" role="application" aria-label="Interactive treasure hunt map"></div>
    </section>
    <script src="{% static "google-map.js" %}"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key={{ api_key }}&amp;libraries=places&amp;callback=initAutocomplete"
            async
            defer></script>
    <script>
      // Attach event listener unobtrusively
      document.getElementById('search-button').addEventListener('click', searchHere);
    </script>
  </body>
</html>
